
{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 1000,
  "height": 500,
  "projection": {
    "type": "mercator",
    "scale": {"expr": "zoom_level"},
    "center": [0, 20]
  },
  "params": [
    {
      "name": "zoom_level",
      "value": 150,
      "bind": {
        "input": "range",
        "min": 50,
        "max": 1000,
        "step": 10,
        "name": "Zoom Level: "
      }
    },
    {
      "name": "SizeFilter",
      "value": "All",
      "bind": {
        "input": "select",
        "options": ["All", "unknown", "small", "medium", "large", "very_large", "catastrophic"],
        "name": "Select Landslide Size: "
      }
    },
    {
      "name": "CategoryFilter",
      "value": "All",
      "bind": {
        "input": "select",
        "options": [
          "All",
          "landslide",
          "mudslide",
          "complex",
          "rock_fall",
          "debris_flow",
          "riverbank_collapse",
          "other",
          "unknown",
          "lahar",
          "snow_avalanche",
          "creep",
          "earth_flow",
          "translational_slide",
          "topple"
        ],
        "name": "Select Landslide Category: "
      }
    },
    {
      "name": "TriggerFilter",
      "value": "All",
      "bind": {
        "input": "select",
        "options": [
          "All",
          "rain",
          "downpour",
          "monsoon",
          "tropical_cyclone",
          "unknown",
          "continuous_rain",
          "dam_embankment_collapse",
          "no_apparent_trigger",
          "other",
          "leaking_pipe",
          "construction",
          "snowfall_snowmelt",
          "mining",
          "flooding",
          "earthquake",
          "freeze_thaw",
          "volcano",
          "vibration"
        ],
        "name": "Select Landslide Trigger: "
      }
    },
    {
      "name": "SettingFilter",
      "value": "All",
      "bind": {
        "input": "select",
        "options": [
          "All",
          "mine",
          "unknown",
          "above_road",
          "urban",
          "natural_slope",
          "engineered_slope",
          "below_road",
          "above_river",
          "retaining_wall",
          "other",
          "above_coast",
          "bluff",
          "burned_area",
          "deforested_slope"
        ],
        "name": "Select Landslide Setting: "
      }
    },
    {
      "name": "YearFilter",
      "value": "All",
      "bind": {
        "input": "select",
        "options": ["All", "2007", "2008", "2009", "2010", "2011", "2012", "2013", "2014", "2015", "2016"],
        "name": "Select Year: "
      }
    }
  ],
  "layer": [
    {
      "data": {
        "name": "source_countries",
        "url": "https://vega.github.io/vega-datasets/data/world-110m.json",
        "format": {"type": "topojson", "feature": "countries"}
      },
      "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"}
    },
    {
      "data": {
        "name": "source_graticules",
        "url": "https://kzhang583.github.io/FIT3171V2KZ/ne_110m_graticules_30.json",
        "format": {"type": "topojson", "feature": "ne_110m_graticules_30"}
      },
      "mark": {"type": "geoshape", "stroke": "gray", "strokeWidth": 0.5}
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/kzhang583/FIT3171V2KZ/main/Global_Landslide_Catalog_Export.csv",
        "format": {"type": "csv"}
      },
      "transform": [
        {"filter": "SizeFilter == 'All' || datum.landslide_size == SizeFilter"},
        {"filter": "CategoryFilter == 'All' || datum.landslide_category == CategoryFilter"},
        {"filter": "TriggerFilter == 'All' || datum.landslide_trigger == TriggerFilter"},
        {"filter": "SettingFilter == 'All' || datum.landslide_setting == SettingFilter"},
        {"filter": "YearFilter == 'All' || year(datum.event_date) == YearFilter"}
      ],
      "mark": "circle",
      "encoding": {
        "longitude": {"field": "longitude", "type": "quantitative"},
        "latitude": {"field": "latitude", "type": "quantitative"},
        "size": {"value": 30},
        "color": {"value": "#8B4513"},
        "tooltip": [
          {"field": "event_title", "type": "nominal", "title": "Event"},
          {"field": "event_date", "type": "temporal", "title": "Date"},
          {"field": "country_code", "type": "nominal", "title": "Country"},
          {"field": "landslide_category", "type": "nominal", "title": "Landslide Category"},
          {"field": "landslide_trigger", "type": "nominal", "title": "Landslide Trigger"},
          {"field": "landslide_size", "type": "nominal", "title": "Landslide Size"},
          {"field": "landslide_setting", "type": "nominal", "title": "Landslide Setting"}
        ]
      }
    }
  ]
}
